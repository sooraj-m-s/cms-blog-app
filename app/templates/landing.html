<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Blog Hub</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
        <link rel="stylesheet" href="/static/css/landing.css">
    </head>
    <body class="bg-gray-100">

        <!-- Toast Container -->
        <div id="toastContainer" class="toast-container"></div>

        <!-- Header -->
        <header class="bg-slate-900/50 backdrop-blur-lg border-b border-slate-700/50 sticky top-0 z-50">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <h1 class="text-2xl font-bold text-white flex items-center gap-2">
                    <i data-lucide="book-open" class="w-6 h-6 text-indigo-400"></i>
                    Blog Hub
                </h1>
                <div class="flex items-center gap-4">
                    <!-- View Toggle Buttons -->
                    <div class="flex gap-2">
                        <button id="allBlogsBtn" onclick="showAllBlogs()" class="btn-secondary text-sm btn-active">
                            <i data-lucide="globe" class="w-4 h-4"></i>
                            All Blogs
                        </button>
                        <button id="myBlogsBtn" onclick="showMyBlogs()" class="btn-secondary text-sm">
                            <i data-lucide="user" class="w-4 h-4"></i>
                            My Blogs
                        </button>
                    </div>
                    <span id="userInfo" class="text-slate-300"></span>
                    <button onclick="logout()" class="btn-secondary text-sm">
                        <i data-lucide="log-out" class="w-4 h-4"></i>
                        Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <div id="loadingSpinner" class="text-center py-12">
                <div class="loading mx-auto mb-4"></div>
                <p class="text-slate-400">Loading blogs...</p>
            </div>

            <div id="errorContainer" class="hidden">
                <div class="error-message text-center">
                    <p id="errorMessage"></p>
                    <button onclick="loadCurrentView()" class="btn-primary mt-4">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                        Retry
                    </button>
                </div>
            </div>

            <div id="blogsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Blogs will be loaded here -->
            </div>
        </main>

        <!-- Feedback Modal -->
        <div id="feedbackModal" class="modal">
            <div class="modal-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-white">Blog Feedback</h2>
                    <button onclick="closeFeedbackModal()" class="text-slate-400 hover:text-white">
                        ✕
                    </button>
                </div>
                <div id="feedbackContent">
                    <!-- Feedback content will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Blog Create/Edit Modal -->
        <div id="blogModal" class="modal">
            <div class="modal-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 id="blogModalTitle" class="text-xl font-bold text-white">Create New Blog</h2>
                    <button onclick="closeBlogModal()" class="text-slate-400 hover:text-white">
                        ✕
                    </button>
                </div>
                <form id="blogForm" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="blogTitle" class="form-label">Title</label>
                        <input type="text" id="blogTitle" name="title" class="form-input" placeholder="Enter blog title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="blogContent" class="form-label">Content</label>
                        <textarea id="blogContent" name="content" class="form-input" rows="6" placeholder="Write your blog content here..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Image (Optional)</label>
                        <div class="file-input" onclick="document.getElementById('blogImage').click()">
                            <input type="file" id="blogImage" name="image" accept="image/*" style="display: none;" onchange="handleImageSelect(this)">
                            <div id="imageUploadArea">
                                <i data-lucide="upload" class="w-8 h-8 mx-auto mb-2 text-slate-400"></i>
                                <p class="text-slate-400">Click to upload image or drag and drop</p>
                                <p class="text-xs text-slate-500 mt-1">PNG, JPG, GIF up to 10MB</p>
                            </div>
                            <div id="imagePreview" class="hidden">
                                <img id="previewImg" class="max-w-full h-32 object-cover rounded mx-auto mb-2">
                                <p id="imageName" class="text-sm text-slate-300"></p>
                                <button type="button" onclick="clearImage()" class="text-xs text-red-400 hover:text-red-300 mt-1">Remove</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex gap-3">
                        <button type="submit" id="blogSubmitBtn" class="btn-primary flex-1">
                            <i data-lucide="save" class="w-4 h-4"></i>
                            <span id="blogSubmitText">Create Blog</span>
                        </button>
                        <button type="button" onclick="closeBlogModal()" class="btn-secondary">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <footer class="bg-gray-800 text-white py-4 mt-8">
            <div class="container mx-auto px-4 text-center">
                <p>&copy; 2025 Blog Hub. All rights reserved.</p>
            </div>
        </footer>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const blogsContainer = document.getElementById('blogsContainer');

                // Function to create a blog card
                function createBlogCard(blog) {
                    const card = document.createElement('div');
                    card.classList.add('blog-card', 'bg-white', 'rounded-lg', 'shadow-md');

                    card.innerHTML = `
                        <h2 class="text-xl font-semibold mb-2">${blog.title}</h2>
                        <p class="text-gray-700 mb-4">${blog.content}</p>
                        <div class="flex justify-between items-center text-sm text-slate-400 mb-4">
                            <div class="flex items-center gap-4">
                                <span class="flex items-center gap-1">
                                    <i data-lucide="eye" class="w-4 h-4"></i>
                                    <span class="view-count">${blog.views}</span>
                                </span>
                                <span class="flex items-center gap-1">
                                    <i data-lucide="heart" class="w-4 h-4"></i>
                                    <span class="like-count">${blog.likes}</span>
                                </span>
                                <span class="flex items-center gap-1">
                                    <i data-lucide="thumbs-down" class="w-4 h-4"></i>
                                    <span class="dislike-count">${blog.dislikes}</span>
                                </span>
                                <span class="flex items-center gap-1">
                                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                                    <span class="comment-count">${blog.comments}</span>
                                </span>
                            </div>
                        </div>
                    `;

                    return card;
                }

                lucide.createIcons();
            });

            function showAllBlogs() {
                // Implementation for showing all blogs
            }

            function showMyBlogs() {
                // Implementation for showing my blogs
            }

            function logout() {
                // Implementation for logout
            }

            function handleImageSelect(input) {
                // Implementation for handling image selection
            }

            function clearImage() {
                // Implementation for clearing image
            }

            function loadCurrentView() {
                // Implementation for loading current view
            }

            function closeFeedbackModal() {
                // Implementation for closing feedback modal
            }

            function closeBlogModal() {
                // Implementation for closing blog modal
            }
        </script>

        <script src="/static/js/landing.js"></script>
    </body>
</html>